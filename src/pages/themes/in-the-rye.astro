---
import Layout from "@/layouts/Layout.astro";
export const pageTDK = {
  title: "In The Rye",
  description: "",
  keywords: "",
};
---

<Layout
  title={pageTDK.title || ""}
  description={pageTDK.description || ""}
  keywords={pageTDK.keywords || ""}
>
  <div class="page-show no-scroll">
    <div class="page-content">
      <!-- theme -->
      <section class="theme">
        <div class="container theme-container">
          <div class="theme-inner">
            <div class="col-12 col-sm-10 col-md-8 col-lg-8 m-auto theme-main theme-title">
              <h1 class="title theme-title-top text-center opacity-0">IN THE RYE</h1>
              <div class="theme-hero col-7 col-md-5 col-lg-4 col-xl-4 opacity-0">
                <img
                  src="/images/theme/in-the-rye/cover.jpg"
                  alt=""
                  class="theme-hero__img"
                />
              </div>
              <h3 class="description m theme-title-bottom text-center opacity-0">
                Together with the @cottonbro<br />
                 we were trying to imagine what<br />
                IN THE RYE looked like
              </h3>
            </div>
          </div>
          <div class="theme-gallery">
            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-12 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/1.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>
            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/2.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/3.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
              <div class="theme-gallery__item col-12 col-md-6 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/4.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>
            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-12 col-md-6 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/5.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>

              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/6.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/7.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>

            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-12 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/8.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>

            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-8 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/9.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>

              <div class="theme-gallery__item col-12 col-md-6 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/10.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>

              <div class="theme-gallery__item col-8 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/11.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>

            <div class="theme-gallery__inner">
              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/12.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>

              <div class="theme-gallery__item col-6 col-md-3 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/13.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
              <div class="theme-gallery__item col-12 col-md-6 gallery-item-hidden">
                <img
                  src="/images/theme/in-the-rye/14.jpg"
                  alt=""
                  class="theme-gallery__img"
                />
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</Layout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("astro:page-load", () => {

  if (document.querySelector('.theme-title')) {
    const tl_themeCText = gsap.timeline();
    tl_themeCText
      .fromTo(
        ".theme-title-top",
        {
          y: 60,
          opacity: 0,
        },
        {
          y: 0,
          opacity: 1,
          duration: 1,
          delay: 0.3,
          ease: "power2.out",
        }
      )
      .fromTo(
        ".theme-hero",
        {
          y: 40,
          opacity: 0,
          scale: 1,
          rotation: -8,
        },
        {
          y: 0,
          opacity: 1,
          scale: 1,
          rotation: -12,
          duration: 1.2,
          ease: "power2.out",
        },
        "-=0.7"
      )
      .fromTo(
        ".theme-title-bottom",
        {
          y: 40,
          opacity: 0,
        },
        {
          y: 0,
          opacity: 1,
          duration: 1,
          ease: "power2.out",
        },
        "-=0.8"
      );
  }
    if (document.querySelector('.theme-gallery')) {
      const galleries = gsap.utils.toArray<HTMLElement>(".theme-gallery__inner");
      galleries.forEach((gallery) => {
        const items = gallery.querySelectorAll(".theme-gallery__item");
        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: gallery,
            start: "top bottom-=100",
            toggleActions: "play none none none"
          }
        });
        tl.fromTo(items, 
          { y: 60, opacity: 0 },
          { 
            y: 0, 
            opacity: 1, 
            duration: 0.8, 
            stagger: 0.15,
            ease: "power2.out",
            onComplete: function() {
              items.forEach(item => {
                item.classList.remove('gallery-item-hidden');
              });
            }
          }
        );
      });
    }
  });
</script>

<style lang="scss">
  @media (min-width: 767px) {
    section .container:first-child {
      margin-top: 4rem;
    }
  }
  @media (min-width: 1200px) {
    section .container:first-child {
      margin: 2rem auto 4rem;
    }
  }
  
  // 初始隐藏元素的样式
  .opacity-0 {
    opacity: 0;
  }
  
  .gallery-item-hidden {
    opacity: 0;
    transform: translateY(60px);
  }
  
  .theme-title-top {
    position: relative;
    z-index: 0;
  }
  .theme-title-bottom {
    position: relative;
    margin-top: -4vh;
    z-index: 3;
    font-weight: 400;
  }
  .theme-main {
    position: relative;
  }
  .theme-hero {
    position: relative;
    margin: -12px auto 20px;
    transform: rotate(-8deg);
    z-index: 2;
    transition: transform 0.3s ease;
    
    &:hover {
      transform: rotate(-6deg) scale(1.02);
    }
    
    &__img {
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
  }
  .title {
    font-size: 4.5rem;
  }
  @media (max-width: 768px) {
    .title {
      font-size: 3rem;
    }
  }
  .description {
    font-weight: 500;
  }
  .theme-gallery {
    position: relative;
    margin: 120px auto;
    z-index: 1;
    width: 100%;
    &__inner {
      position: relative;
      display: flex;
      flex-wrap: wrap;
      margin: 3rem auto;
      justify-content: center;
    }
    &__item {
      position: relative;
      max-width: 100%;
      overflow: hidden;
      display: flex;
      
      &:hover .theme-gallery__img {
        transform: scale(1.05);
      }
    }
    &__img {
      object-fit: cover;
      width: 100%;
      padding: 0;
      transition: transform 0.5s ease;
    }
    @media (max-width: 768px) {
      .col-12 {
        margin: 20px auto;
      }
    }
  }
</style>